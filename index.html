<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vennly</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400..800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css" />
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>

    <style>
        body{
            background-color: #1e1e1e;
            margin: 0;
            overflow: hidden;
            height: 844px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: "Baloo 2", sans-serif;
            font-size: 25px;
            position: relative;
        }
        .grid{
            display: grid;
            grid-template-rows: repeat(3, 1fr);
            grid-template-columns: repeat(3, 1fr);
            height: 305px;
            width: 305px;
            gap: 10px;
        }
        .container{
            width: 390px;
            height: 844px;
            position: relative;
            overflow: hidden;
            display: flex;
            flex-direction: row;
        }
        .stage-container{
            width: 100%;
            height: 100%;
            display: flex;
            flex-direction: column;
        }
        .swiper{
            height: 100%;
            width: 100%;
        }
        .app-page{
            height: 100%;
            width: 100%;
            background-color: #FFF9CA;
            display: flex;
            align-items: center;
            flex-direction: column;
        }
        .number{
            border-radius: 23px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        .number h1{
            margin: 0px;
        }
        .number.locked{
            cursor: not-allowed;
            color: #737373 !important ;
            background-color: #b6b6b6 !important ;
        }
        
        .page1 .number{
            background-color: #FFD9E1;
            color: #FFA8C8;
        }
        .page2 .number{
            background-color: #C0E3FF;
            color: #5FA3FF;
        }
        .page3 .number{
            background-color: #F0D5FF;
            color: #C886F8;
        }
        .venn-container {
            position: absolute; 
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: 20; 
            display: none;
            background-color: white;
            flex-direction: column;
            justify-content: space-between;
            align-items: center;
            box-sizing: border-box;
            background-color: #FFF9CA;
        }
        .rect-clickable, path{
            stroke-width: 1;
            fill: white;
            stroke: black;
        }
        .clicked {
            fill: #F0FFBD !important;
        }
        svg text{
            font-size: 7px;
            font-weight: bold;
            fill: black;
            text-anchor: middle;
            pointer-events: none;
        }
        svg text.universe{
            font-size: 10px;
        }
        #submit-btn{
            height: 69px;
            width: 133px;
            font-size: 24px;
            font-weight: 900;   
            border: none;
            border-radius: 23px;
            background-color: #FF7A69;
            color: white;
            cursor: pointer;
        }
        #submit-btn:active, #back-btn:active ,.number:active,.question-logo:active{
            transform: scale(0.95);
        }
        .question-info{
            width: 302px;
            display: flex;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }
        .question-info-row{
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            width: 100%;
        }
        .question-info-row #question-number,.question-info-row #status{
            width: 133px;
            height: 69px;
            margin: 0;
            font-size: 25px;
            font-weight: bold;
            border-radius: 23px;
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .question-info-row #question-number{
            background-color: #FFC0A5;
        }
        .question-info-row #status{
            background-color: #AEB4FF;
        }
        #question{
            max-width: 100%;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            font-size: 20px;
            background-color: #FFD481;
            width: 100%;
            height: 69px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 23px;
            color: white;
            font-weight: bold;
            margin-top: 42px;
            margin-bottom: 0;
        }
        .swiper-pagination {
            position: absolute;
            bottom: 20px;
        }
        .swiper-pagination-bullet{
            background-color: #FFFFFF;
            opacity: 0.5;
        }
        .swiper-pagination-bullet-active{
            background-color: #FFAD7A;
            opacity: 1;
        }
        nav{
            background-color: #FFDEBD;
            height: 75px;
            width: 100%;
            display: flex;
            align-items: center;
            justify-content: space-between;
        }
        nav img{
            height: 38.64px;
            margin: 21px;
            cursor: pointer;
            vertical-align: middle;
        }
        .content-text{
            width: 305px;
            display: flex;
            flex-direction: row;
            color: white;
            font-weight: bold;
            align-items: center;
            margin: 50px;
            justify-content: space-between;
        }
        .content-text .stage{
            background-color: #FFC0A5;
            border-radius: 23px;
            padding: 20px 33px;
            font-size: 25px;
            height: 29px;
            width: 67px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .content-text .level{
            border-radius: 23px;
            font-size: 40px;
            width: 164px;
            height: 90px;
            display: flex;
            justify-content: center;
            align-items: center;
        }
        .page1 .level{
            background-color: #FFD9E1;
            text-shadow: -1px -1px 0 #FFA8C8,1px -1px 0 #FFA8C8,-1px 1px 0 #FFA8C8,1px 1px 0 #FFA8C8;
        }
        .page2 .level{
            background-color: #C0E3FF;
            text-shadow: -1px -1px 0 #5FA3FF,1px -1px 0 #5FA3FF,-1px 1px 0 #5FA3FF,1px 1px 0 #5FA3FF;
        }
        .page3 .level{
            background-color: #F0D5FF;
            text-shadow: -1px -1px 0 #C886F8,1px -1px 0 #C886F8,-1px 1px 0 #C886F8,1px 1px 0 #C886F8;
        }
        .gridLogo{
            display: flex;
            justify-content: center;
        }
        .gridLogo img{
            height: 138px;
            margin-top: 32px;
        }
        footer{
            background-color: #FFDEBD;
            height: 75px;
            display: flex;
            align-items: center;
            width: 100%;
            position: relative;
        }
        footer img{
            height: 38.64px;
            margin: 21px;
            cursor: pointer;
        }
        footer .div-text-level{
            margin: 0;
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            color: white;
            p{
                font-weight: bold;
                font-size: 35px;
            }
        }
        
        @keyframes shakeText {
            0% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            50% { transform: translateX(5px); }
            75% { transform: translateX(-5px); }
            100% { transform: translateX(0); }
        }

        .shake {
            animation: shakeText 0.5s;
        }

        .timer-container{
            height: 100%;
            width: 100%;
            overflow: hidden;
            position: relative;
            display: flex;
            flex-direction: column;
        }
        .text-timer-all{
            width: 100%;
            display: flex;
            position: relative;
            justify-content: center;
            height: auto;
        }
        .app-page .text-timer{
            display: flex;
            background-color: #C0E8BE;
            color: white;
            border-radius: 47px;
            font-weight: bold;
            width: 134px;
            height: 57px;
            align-items: center;
            justify-content: center;
            margin-top: 23px;
            left: 22px;
            align-self: flex-start;
            position: absolute;
        }
        .app-page .big-logo-timer-page{
            width: 264px;
            height: 329px;
            margin-top: 62px;
        }
        .text-sets3{
            background-color: #AEB4FF;
            color: white;
            font-size: 25px;
            font-weight: bold;
            width: 133px;
            height: 59px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 23px;
            position: relative;
        }
        .text-sets3{
            margin-top: 31px;
        }
        .bestTime{
            display: flex;
            flex-direction: row;
            margin-top: 35px;
            width: 266px;
            height: 39px;
        }
        .bestTime p{
            margin: 0;
            color: #FF914D;
            font-size: 25px;
            font-weight: bold;
        }
        .whitebar-bestTime{
            background-color: white;
            height: 38px;
            width: 132px;
            display: flex;
            border-radius: 21px;
            margin-left: 5px;
            justify-content: center;
            align-items: center;
        }
        .whitebar-bestTime p{
            text-align: center;
        }
        .timer-start{
            background-color: #FF7A69;
            color: white;
            font-size: 30px;
            font-weight: bold;
            display: flex;
            justify-content: center;
            align-items: center;
            margin: 35px 0;
            width: 155px;
            height: 69px;
            border-radius: 23px;
            cursor: pointer;
        }
        .twoTab{ 
            height: 29px;
        }
        .timerStatus{
            display: flex;
            flex-direction: row;
            width: 87px;
            height: 17px;
            font-size: 10px;
            align-items: center;
            gap: 7px;
            color: #FFAD7A;
            margin: 10px 0px 33px 15px;
        }
        .timerStatus img{
            width: 17px;
        }
        .full-to-center{
            display: flex;
            width: 100%;
            justify-content: center;
            align-items: center;
        }
        .timer-info{
            display: flex;
            font-size: 25px;
            font-weight: bold;
            color: white;
            flex-direction: column;
            width: 302px;
            height: 180px;
            justify-self: center;
        }
        .timer-info-row{
            display: flex;
            flex-direction: row;
            justify-content: space-between;
            margin-bottom: 42px;
        }
        .timer-info-row .timer-text{
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #FFC0A5;
            margin: 0;
            width: 133px;
            height: 69px;
            border-radius: 23px;
        }
        .question-return-info{
            display: flex;
            flex-direction: row;
            position: absolute;
            align-items: center;
            margin-top: 111px;
            width: 302px;
            z-index: 1;
        }
        .tPage2 #status-timer{
            background-color: #AEB4FF;
            margin: 0;
            width: 133px;
            height: 69px;
            display: flex;
            justify-content: center;
            align-items: center;
            border-radius: 23px;
        }
        #timerQuestion{
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #FFD481;
            width: 277px;
            height: 69px;
            border-radius: 23px;
        }
        .question-return-info img{
            height: 50px;
            position: absolute;
            right: 0;
            cursor: pointer;
        }
        .venn-diagram-timer{
            display: flex;
            margin: 29px 0 38px 0;
            justify-content: center;
        }
        .tPage2-endtab{
            width: 80%;
            height: 69px;
            margin: 0;
            display: flex;
            align-items: center;
            position: relative;
            justify-content: center;
            margin-bottom: 38.024px;
            justify-self: center;
        }

        .tPage2-endtab div{
            width: 55px;
            height: 47px;
            position: absolute;
            right: 0;
            justify-content: center;
        }
        .tPage2-endtab img{
            height: 32px;
            display: flex;
            justify-self: center;
            cursor: pointer;
        }
        .tPage2-endtab p{
            width: 55px;
            font-size: 10px;
            color: #EABBD3;
            margin: 2px;
        }
        .stage-container , .timer-container{
            display: none;
        }
        .menu{
            height: 100%;
            width: 100%;
        }
        .munuPage2{
            display: none;
        }
        .menu .body{
            height: 694px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .menuPage1 .body img{
            height: 409px;
            width: 330px;
        }
        .menuPage1Button{
            height: 188px;
            width: 300px;
            margin-top: 32px;
        }
        .menuPage1Button .button{
            border-radius: 40px;
            padding: 12px 97.5px;
            display: flex;
            background-color: #C0E8BE;
            justify-self: center;
            color: white;
            font-weight: bold;
            font-size: 40px;
            margin-bottom: 28px;
            cursor: pointer;
        }
        .text-box {
            display: flex;
            justify-content: center;
            align-items: center;
            font-weight: bold;
            font-size: 45px;
            width: 216px;
            height: 82.5px;
            color: white;
            background-color: #C0E8BE;
            border-radius: 47px;
            margin-top: 72px;
            margin-bottom: 115.5px;
        }
        .menuPage2Button{
            height: 135px;
            width: 307px;
            margin-bottom: 64px;
        }
        .menuPage2Button .button-2{
            color: white;
            display: flex;
            justify-content: center;
            align-items: center;
            background-color: #FFC0A5;
            border-radius: 47px;
            font-size: 35px;
            font-weight: bold;
            margin-bottom: 31px;
            cursor: pointer;
        }
        .logo-menuPage2 img{
            height: 200px;
        }
        a{
            text-decoration: none;
        }  
        .popup-full-to-center{
            background-color: rgba(0,0,0, 0.2);
            height: 100%;
            width: 390px;
            display: none;
            position: absolute;
            justify-content: center;
            align-items: center;
            z-index: 10;
            
        }
        .timer-pop-up{ 
            height: 257px;
            width: 250px;
            background-color: #FFDEBD;
            display: flex;
            justify-content: center;
            border-radius: 29px;
            flex-wrap: wrap;
            margin-top: 236px;
            align-self: flex-start;
        } 
        .headTimerPopUp{
            background-color: #FF914D;
            border-radius: 29px 29px 0 0;
            width: 250px;
            height: 56px;

            display: flex;
            flex-direction: row;
            justify-content: center;
            align-items: center;
            gap: 20px;
            color: #FFDEBD;
            font-weight: bold;
            font-size: 20px;
        }
        .headTimerPopUp .p2{
            font-size: 31px;
        }
        .button-pop-up{
            display: flex;
            justify-content: space-evenly;
            height: 201px;
            width: 250px;
            flex-direction: column;
        }
        .button-pop-up .line{
            background-color: #FFAD7A;
            height: 1px;
            width: 171.9px;
            justify-self: center;
            align-self: center;
        }
        .restart-btn , .continue-btn{
            font-size: 31px;
            font-weight: bold;
            color: #FF5757;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer;
        }
        .continue-btn{
            color: #C886F8;
            
        }
        
    </style>
</head>
<body>
    <div class="container">
        <div class="menu">
            <div class="app-page menuPage1">
                <nav>
                    <img src="burger-tap.png" alt="" onclick="wtf()">
                    <a href="https://www.wikipedia.org/"><img src="question-logo.png" alt="" class="question-logo"></a>
                </nav>
                <div class="body">
                    <img src="logo.png" alt="">
                    <div class="menuPage1Button">
                        <a href="https://www.wikipedia.org/"><div class="button">Learn</div></a>
                        <div class="button" onclick="gotoMenuGame()">Game</div>
                    </div>
                </div>
                <footer>
                    
                </footer>
            </div>
            <div class="app-page menuPage2">
                <nav>
                    <img src="burger-tap.png" alt="" onclick="wtf()">
                    <a href="https://www.wikipedia.org/"><img src="question-logo.png" alt="" class="question-logo"></a>
                </nav>
                <div class="body">
                    <div class="text-box">
                        Game
                    </div>
                    <div class="menuPage2Button">
                        <div class="button-2" onclick="goStageMode()">Stage</div>
                        <div class="button-2" onclick="goTimerMode()">Timer</div>
                    </div>
                    <div class="logo-menuPage2">
                        <img src="logo.png" alt="">
                    </div>
                </div>
                <footer>
                    <img src="go-back.png" alt="" onclick="gobackMenuGame()">
                </footer>
            </div>  
        </div>
        <div class="stage-container">
            <nav>
                <img src="burger-tap.png" alt="" onclick="wtf()">
                <a href="https://www.wikipedia.org/"><img src="question-logo.png" alt="" class="question-logo"></a>
            </nav>
            <div class="swiper mySwiper" id="menu-container">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div class="app-page page1">
                            <div class="content-text">
                                <div class="stage">Stage</div>
                                <div class="level">Newbie</div>
                            </div>
                            <div class="grid">
                                <div class="number " onclick="trytogoQuestion(1)"><h1>1</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(2)"><h1>2</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(3)"><h1>3</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(4)"><h1>4</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(5)"><h1>5</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(6)"><h1>6</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(7)"><h1>7</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(8)"><h1>8</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(9)"><h1>9</h1></div>
                            </div>
                            <div class="gridLogo">
                                <img src="logo.png" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="app-page page2">
                            <div class="content-text">
                                <div class="stage">Stage</div>
                                <div class="level">Practice</div>
                            </div>
                            <div class="grid">
                                <div class="number locked" onclick="trytogoQuestion(10)"><h1>1</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(11)"><h1>2</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(12)"><h1>3</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(13)"><h1>4</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(14)"><h1>5</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(15)"><h1>6</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(16)"><h1>7</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(17)"><h1>8</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(18)"><h1>9</h1></div>
                            </div>
                            <div class="gridLogo">
                                <img src="logo.png" alt="">
                            </div>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div class="app-page page3">
                            <div class="content-text">
                                <div class="stage">Stage</div>
                                <div class="level">Expert</div>
                            </div>
                            <div class="grid">
                                <div class="number locked" onclick="trytogoQuestion(19)"><h1>1</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(20)"><h1>2</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(21)"><h1>3</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(22)"><h1>4</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(23)"><h1>5</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(24)"><h1>6</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(25)"><h1>7</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(26)"><h1>8</h1></div>
                                <div class="number locked" onclick="trytogoQuestion(27)"><h1>9</h1></div>
                            </div>
                            <div class="gridLogo">
                                <img src="logo.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="swiper-pagination"></div>
            </div>
            <footer>
                <img src="go-back.png" alt="" onclick="gotoMenu()">
            </footer>
            <div class="venn-container" id="quiz-container">
                <nav>
                    <img src="burger-tap.png" alt="" onclick="wtf()">
                    <a href="https://www.wikipedia.org/"><img src="question-logo.png" alt="" class="question-logo"></a>
                </nav>

                <div class="question-info">
                    <div class="question-info-row">
                        <p id="question-number">Stage ...</p>
                        <p id="status">3 Sets</p>
                    </div>
                    <p id="question">Question ...</p>
                </div>

                <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="280px" width="80%" viewBox="0 0 120 120">
                    <rect class="rect-clickable" x="0" y="0" width="120" height="120" onclick="toggleColor(this, 128)" />
                    <path d="M 60 20 A 30 30 0 1 0 31 71 30 30 0 0 1 51 48 30 30 0 0 1 60 20" onclick="toggleColor(this, 1)" />
                    <path d="M 60 20 A 30 30 0 0 0 51 48 30 30 0 0 1 69 48 30 30 0 0 0 60 20" onclick="toggleColor(this, 2)" />
                    <path d="M 60 20 A 30 30 0 1 1 89 71 30 30 0 0 0 69 48 30 30 0 0 0 60 20" onclick="toggleColor(this, 4)" />
                    <path d="M 60 64 A 30 30 0 0 1 31 71 30 30 0 0 1 51 48 30 30 0 0 0 60 64" onclick="toggleColor(this, 8)" />
                    <path d="M 60 64 A 30 30 0 0 1 51 48 30 30 0 0 1 69 48 30 30 0 0 1 60 64" onclick="toggleColor(this, 16)" />
                    <path d="M 60 64 A 30 30 0 0 0 89 71 30 30 0 0 0 69 48 30 30 0 0 1 60 64" onclick="toggleColor(this, 32)" />
                    <path d="M 31 71 A 30 30 0 1 0 89 71 30 30 0 0 1 60 64 30 30 0 0 1 31 71" onclick="toggleColor(this, 64)" />
                    
                    <text class="universe" x="112" y="10">U</text>
                    <text x="18" y="18">A</text>
                    <text x="102" y="18">B</text>
                    <text x="60" y="115">C</text>
                </svg>

                <button id="submit-btn" onclick="submitAnswer()">Enter</button>
                <footer>
                    <img src="go-back.png" alt="" id="back-btn" onclick="goBack()">
                    <div class="div-text-level"><p id="text-level">loading level...</p></div>
                </footer>
            </div>
        </div>
        <div class="timer-container">
            <div class="app-page tPage1" >
                <nav>
                    <img src="burger-tap.png" alt="" onclick="resetTimerMode()">
                    <a href="https://www.wikipedia.org/"><img src="question-logo.png" alt="" class="question-logo"></a>
                </nav>

                <div class="text-timer-all">
                    <div class="text-timer">Timer</div>
                    <img src="logo.png" alt="" class="big-logo-timer-page">
                </div>
                <div class="text-sets3">
                    3 Sets
                </div>
                <div class="bestTime">
                    <p>BEST TIME : </p>
                    <div class="whitebar-bestTime"><p id="highestTime">00 : 00</p></div>
                </div>
                <div class="timer-start" onclick="goTimerGame()">start</div>

                <footer>
                    <img src="go-back.png" alt="" onclick="gotoMenu()">
                </footer>
            </div>
            <div class="app-page tPage2">
                <div class="popup-full-to-center">
                    <div class="timer-pop-up">
                        <div class="headTimerPopUp">
                                <div class="p1">pause</div>
                                <div class="p2">Vennly</div>
                        </div>
                        <div class="button-pop-up">
                            <div class="restart-btn" onclick="goTimerGame()">Restart</div>
                            <div class="line"></div>
                            <div class="continue-btn" onclick="showTimerPopup()">Continue</div>
                        </div>
                    </div>
                </div>
                <nav>
                    <img src="two-tap.png" alt="" onclick="showTimerPopup()" class="twoTab">
                    <a href="https://www.wikipedia.org/"><img src="question-logo.png" alt="" class="question-logo"></a>
                </nav>
                <div class="timerStatus" >
                    <img src="clock.png" alt="">
                    <div class="game-timer" id="game-timer-tab">00 : 00</div>
                </div>
                <div class="full-to-center">
                    <div class="timer-info">
                        <div class="timer-info-row">
                            <p class="timer-text" id="number-correct">Timer</p>
                            <p id="status-timer">3 Sets</p>
                        </div>
                        <div class="question-return-info">
                            <p id="timerQuestion">Question...</p>
                            <img src="newRandom.png" alt="" onclick="newQuestion()">
                        </div>
                    </div>
                </div>
                <div class="venn-diagram-timer">
                    <svg xmlns="http://www.w3.org/2000/svg" version="1.1" height="280px" width="80%" viewBox="0 0 120 120">
                        <rect class="rect-clickable" x="0" y="0" width="120" height="120" onclick="toggleColor(this, 128)" />
                        <path d="M 60 20 A 30 30 0 1 0 31 71 30 30 0 0 1 51 48 30 30 0 0 1 60 20" onclick="toggleColor(this, 1)" />
                        <path d="M 60 20 A 30 30 0 0 0 51 48 30 30 0 0 1 69 48 30 30 0 0 0 60 20" onclick="toggleColor(this, 2)" />
                        <path d="M 60 20 A 30 30 0 1 1 89 71 30 30 0 0 0 69 48 30 30 0 0 0 60 20" onclick="toggleColor(this, 4)" />
                        <path d="M 60 64 A 30 30 0 0 1 31 71 30 30 0 0 1 51 48 30 30 0 0 0 60 64" onclick="toggleColor(this, 8)" />
                        <path d="M 60 64 A 30 30 0 0 1 51 48 30 30 0 0 1 69 48 30 30 0 0 1 60 64" onclick="toggleColor(this, 16)" />
                        <path d="M 60 64 A 30 30 0 0 0 89 71 30 30 0 0 0 69 48 30 30 0 0 1 60 64" onclick="toggleColor(this, 32)" />
                        <path d="M 31 71 A 30 30 0 1 0 89 71 30 30 0 0 1 60 64 30 30 0 0 1 31 71" onclick="toggleColor(this, 64)" />
                        
                        <text class="universe" x="112" y="10">U</text>
                        <text x="18" y="18">A</text>
                        <text x="102" y="18">B</text>
                        <text x="60" y="115">C</text>
                    </svg>
                </div>
                <div class="full-to-center">
                    <div class="tPage2-endtab">
                        <button id="submit-btn" onclick="submitAnswerTimer()">Enter</button>
                        <div class="img-clear" onclick="resetColor()">
                            <img src="clearBoard.png" alt="">
                            <p>clear board</p>
                        </div>
                    </div>
                </div>
                <footer>
                    <img src="go-back.png" alt="" id="back-btn" onclick="goTimerMenu()">
                </footer>
            </div>

        </div>
    </div>
</body>
<script>
    
    var swiper = new Swiper(".mySwiper",{
        slidePerView: 1,
        spaceBetween: 0,
        pagination: {
            el: ".swiper-pagination",
            clickable: true,
        },
        effect: 'slide',
        speed: 500,

    });

    const menuContainer = document.getElementById("menu-container");
    const quizContainer = document.getElementById("quiz-container");

    let selectedState = 0;
    let completedQuestions = {};
    let highestUnlockedQuestion = 1;
    let questions = [];

    let questionsTimer = [];
    let currentQuestionTimerIndex = 0;
    let randomQuestionsTimer = [];
    let correctTimerQuestions = 0;

    let elapsedTime = 0;
    let isRunning = false;
    let startTime;
    let timerInterval;
    let nowTime =0;
    let bestTime = 0;

    let timerPopupRunning = false;

    async function loadQuestions(){
        try{
            let response = await fetch("questions.json");
            questions = await response.json();
            console.log("Questions loaded successfully: ",questions)

        }
        catch(error){
            console.error("Error loading questions: ",error)
            console.log("Using mock questions:", questions);

        }
        loadProgress();
        updateButtonStatus();
    }
    async function loadTimerQuestion() {
        try{
            let timerRespone = await fetch("questionsTimer.json");
            questionsTimer = await timerRespone.json();
            console.log("Questions timer loaded successfully: ",questionsTimer); 
        }   
        catch(error){
            console.log("Error loading questions timer: ",error);x
            console.log("Using mock questions timer", questionsTimer);
        }   
    }

    function trytogoQuestion(questionNumber){
        if(questionNumber>highestUnlockedQuestion){
            alert("คุณไม่สามารถทำข้อนี้ได้ โปรดทำข้อก่อนหน้าให้เสร็จก่อน");
            return;
        }
        gotoQuestion(questionNumber);
    }

    function gotoQuestion(questionNumber){
        if(!questions || questions.length===0){
            alert("โหลดโจทย์ไม่สำเร็จ");
            return;
        }
        
        currentIndex = questionNumber-1;

        if(currentIndex < 0 || currentIndex>questions.length){
            alert("ไม่พบข้อนี้");
            return;
        }

        menuContainer.style.display = "none";
        quizContainer.style.display = "flex";

        resetColor();
        showQuestions();
    }

    function goBack(){
        menuContainer.style.display = "block";
        quizContainer.style.display = "none";

        updateButtonStatus();
    }

    function showQuestions(){
        if(currentIndex>=questions.length){
            document.getElementById('question').innerText="คุณทำครบทุกข้อแล้ว";
            alert("เกมจบลงแล้ว")
            return;
        }

        let currentQuestion = questions[currentIndex]
        if(((currentIndex+1)%9)=== 0){
            document.getElementById("question-number").innerText = `Stage ${((currentIndex )%9)+1}`;
        }
        else{
            document.getElementById("question-number").innerText = `Stage ${((currentIndex + 1)%9)}`;
        }
        if((currentIndex+1)<=9 && (currentIndex+1)>0){
            document.getElementById('text-level').innerText = "Newbie"
        }
        else if((currentIndex+1)<=18 && (currentIndex+1)>9){
            document.getElementById('text-level').innerText = "Practice"
        }
        else if((currentIndex+1)<=27 && (currentIndex+1)>18){
            document.getElementById('text-level').innerText = "Expert"
        }
        document.getElementById('question').innerText = `${currentQuestion.text}`;
        
        document.getElementById('status').innerText = "3 Sets"
        if(completedQuestions[currentIndex]){
            selectedState =completedQuestions[currentIndex];
            lockSelectedArea();
        }
        else{
            resetColor();
        }
    }
    function resetColor(){
        document.querySelectorAll("path , .rect-clickable").forEach(el =>{
            el.classList.remove("clicked");
        });
        selectedState = 0;
    }
    function lockSelectedArea(){
        const elements = document.querySelectorAll("path , .rect-clickable");
        const values = [ 128 , 1 , 2 , 4 , 8 , 16 , 32 , 64 ];

        elements.forEach(el =>{
            el.classList.remove("clicked");
        });
        elements.forEach((el, index) =>{
            if(index<values.length && (selectedState & values[index])){
                el.classList.add("clicked");
            }
        })

    }

    function toggleColor(element, value) {
        if(element.classList.contains("clicked")){
            element.classList.remove("clicked");
            selectedState &= ~value;
        }
        else{
            element.classList.add("clicked");
            selectedState |= value
        }
    }

    function submitAnswer(){
        if(currentIndex>=questions.length) return;
        let correctAnswer = questions[currentIndex].answer.reduce((acc,val)=> acc | val,0);
        if (selectedState === correctAnswer){
            document.getElementById('status').innerText="ถูกต้อง";

            completedQuestions[currentIndex] = selectedState;

            if(currentIndex+1 === highestUnlockedQuestion){
                highestUnlockedQuestion++;
            }

            saveProgress();

            setTimeout(()=>{
                if(currentIndex+1 < questions.length && currentIndex+1 < highestUnlockedQuestion){
                    currentIndex++;
                    showQuestions();
                }
                else{
                    if(currentIndex+1 >= questions.length){
                        alert("คุณทำครบทุกข้อแล้ว");
                        goBack();
                        swiper.slideTo(2);
                    }
                    else{
                        alert("error");
                    }
                }
            },1000)
        }
        else{
            document.getElementById('status').innerText='ลองอีกครั้ง'
            document.getElementById('status').classList.remove('shake');
            void document.getElementById('status').offsetWidth;
            document.getElementById('status').classList.add('shake');
            resetColor();
        }

    }

    function updateButtonStatus(){
        for(let i = 1 ; i <= 27 ; i++){
            const questionIndex = i - 1;
            const pageIndex = Math.floor(questionIndex / 9);
            const buttonIndex = questionIndex % 9;

            const page = document.querySelector(`.page${pageIndex+1}`);
            if(!page) continue;

            const buttons = page.querySelectorAll('.number');
            if(buttonIndex >= buttons.length) continue;

            const button = buttons[buttonIndex];

            button.classList.remove('locked','completed');

            if(completedQuestions[questionIndex]){
                button.classList.add('completed');
            }
            else if(i > highestUnlockedQuestion){
                button.classList.add('locked');
            }
        }
    }

    function saveProgress(){
        localStorage.setItem('vennQuizCompleted',JSON.stringify(completedQuestions));
        localStorage.setItem('vennQuizHighestUnlocked', highestUnlockedQuestion);
    }

    function loadProgress(){
        try{
            const savedCompleted = localStorage.getItem('vennQuizCompleted')
            const savedHighest = localStorage.getItem('vennQuizHighestUnlocked')

            if (savedCompleted){
                completedQuestions = JSON.parse(savedCompleted);
            }
            if (savedHighest) {
                highestUnlockedQuestion = parseInt(savedHighest);
            }
        }
        catch (e){
            console.error('Error loading saved progress:', e);
        }
    }

    function goTimerGame(){
        document.querySelector(".tPage1").style.display="none";
        document.querySelector(".tPage2").style.display="block";

        if(timerPopupRunning){
            stopTimer();
            showTimerPopup();
        }
        correctTimerQuestions = 0;
        currentQuestionTimerIndex = 0;
        resetColor();
        changeOrder();
        showTimerQuestions();
        startTimer();

    }
    function goTimerMenu(){
        document.querySelector(".tPage2").style.display="none";
        document.querySelector(".tPage1").style.display="flex";

        stopTimer();
        loadBestTimer();
        document.getElementById("highestTime").innerText = displayTime(bestTime);
    }
    function changeOrder(){
        if(!randomQuestionsTimer.length || randomQuestionsTimer.length === questionsTimer.length){
            randomQuestionsTimer = [...questionsTimer];
        }

        for(let i = randomQuestionsTimer.length - 1 ; i >= 0 ; i--){
            const j = Math.floor(Math.random() * (i + 1));
            [randomQuestionsTimer[i], randomQuestionsTimer[j]] = [randomQuestionsTimer[j], randomQuestionsTimer[i]];
        }
    }
    function showTimerQuestions(){
        if(correctTimerQuestions >= 10){
            alert("ทำครบแล้ว");
            stopTimer();
            goTimerMenu();
            
        }
        document.getElementById("timerQuestion").innerText = (randomQuestionsTimer[currentQuestionTimerIndex].text);
        document.getElementById("status-timer").innerText = "3 Sets"
        document.getElementById("number-correct").innerText = "Timer"

    }
    function submitAnswerTimer(){
        let correctAnswerTimer = randomQuestionsTimer[currentQuestionTimerIndex].answer.reduce((acc,val)=> acc|val,0);
        if(selectedState === correctAnswerTimer){
            document.getElementById("status-timer").innerText = "ถูกต้อง"
            correctTimerQuestions++;
            document.getElementById("number-correct").innerText = `${correctTimerQuestions} / 10`
            setTimeout(()=>{
                currentQuestionTimerIndex++;
                showTimerQuestions();
                resetColor();
            },1000)
        }
        else{
            document.getElementById("status-timer").innerText = "ลองอีกครั้ง";
            document.getElementById("status-timer").classList.remove('shake');
            void document.getElementById("status-timer").offsetWidth;
            document.getElementById("status-timer").classList.add("shake");
            resetColor();
        }
    }
    function startTimer(){
        if(isRunning) return;
        startTime = Date.now() - elapsedTime;
        timerInterval = setInterval(updateTimer, 10);
        isRunning = true;
    }
    function stopTimer(){
        clearInterval(timerInterval);
        nowTime = Date.now() - startTime;
        elapsedTime = 0;
        if(correctTimerQuestions >= 10){saveBestTimer();}
        isRunning = false;
        displayTime(0);
    }
    function pauseTimer(){
        if(!isRunning){
            startTimer();
        }
        else if(isRunning){
            clearInterval(timerInterval);
            elapsedTime = Date.now() - startTime;
            isRunning = false;
        }
    }
    function updateTimer(){
        const currentTime = Date.now() - startTime;
        displayTime(currentTime);
    }
    function displayTime(time){
        const milliseconds = time;
        const seconds = Math.floor((time / 1000) % 60);
        const minutes = Math.floor((time / (1000 * 60)) % 60);

        const formattedMinutes = minutes < 10 ? `0${minutes}` : minutes;
        const formattedSeconds = seconds < 10 ? `0${seconds}` : seconds;
        
        document.getElementById("game-timer-tab").innerText = `${formattedMinutes} : ${formattedSeconds}`;
        return `${formattedMinutes} : ${formattedSeconds}`;
        
    }
    function newQuestion(){
        currentQuestionTimerIndex++;
        resetColor();
        showTimerQuestions();
        if(currentQuestionTimerIndex+1 >= randomQuestionsTimer.length){
            changeOrder();
            currentQuestionTimerIndex = 0;
        }
    }
    function saveBestTimer(){
        if(nowTime < bestTime || !bestTime){
            bestTime = nowTime;
            localStorage.setItem('bestTimer' , bestTime);
        }
        return;
    }
    function loadBestTimer(){
        try{
            const savedBestTimer = localStorage.getItem('bestTimer');
            if(savedBestTimer){
                bestTime = parseInt(savedBestTimer);
            }
        }
        catch(e){
            console.error('Error loading saved progress:', e);
        }
    }
    function resetTimerMode(){
        const isConfirmed = confirm("คุณต้องการรีเซ็ตเวลาที่ดีที่สุดใช่หรือไม่?");
        if(isConfirmed){    
            localStorage.removeItem("bestTimer");
            bestTime = 0;
            document.getElementById("highestTime").innerText = "00 : 00";
        }
    }

    function goTimerMode(){
        document.querySelector(".menu").style.display="none";
        document.querySelector(".stage-container").style.display="none";
        document.querySelector(".timer-container").style.display="flex";

        loadBestTimer();
        document.getElementById("highestTime").innerText = displayTime(bestTime);

    }
    function gotoMenuGame(){
        document.querySelector(".menuPage1").style.display="none";
        document.querySelector(".menuPage2").style.display="block";
    }
    function gobackMenuGame(){
        document.querySelector(".menuPage2").style.display="none";
        document.querySelector(".menuPage1").style.display="flex";
    }
    function gotoMenu(){
        document.querySelector(".menu").style.display="flex";
        document.querySelector(".stage-container").style.display="none";
        document.querySelector(".timer-container").style.display="none";
    }
    function goStageMode(){
        document.querySelector(".stage-container").style.display="flex";
        document.querySelector(".timer-container").style.display="none";
        document.querySelector(".menu").style.display="none";
    }
    function showTimerPopup(){
        if(!timerPopupRunning){
            document.querySelector(".popup-full-to-center").style.display="flex"
            timerPopupRunning = true;
        }
        else if(timerPopupRunning){
            document.querySelector(".popup-full-to-center").style.display="none"
            timerPopupRunning = false;
        }
        pauseTimer();
    }
    function wtf(){
        alert('กดทำไม ยังไม่เสร็จ😡😡😡')
    }

window.onload = function(){
    loadQuestions();
    loadTimerQuestion();
}
</script>
</html>
